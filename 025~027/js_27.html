<!-- 日期对象2 && 函数 -->

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
</head>
<body>
        <select id="year-select">
                <option value="2000">2000</option>
                <option value="2001">2001</option>
                <option value="2002">2002</option>
                <option value="2003">2003</option>
                <option value="2004">2004</option>
                <option value="2005">2005</option>
                <option value="2006">2006</option>
                <option value="2007">2007</option>
                <option value="2008">2008</option>
                <option value="2009">2009</option>
                <option value="2010">2010</option>
                <option value="2011">2011</option>
                <option value="2012">2012</option>
                <option value="2013">2013</option>
                <option value="2014">2014</option>
                <option value="2015">2015</option>
                <option value="2016">2016</option>
                <option value="2017">2017</option>
                <option value="2018">2018</option>
                <option value="2019">2019</option>
                <option value="2020">2020</option>
                <option value="2021">2021</option>
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024">2024</option>
                <option value="2025">2025</option>
                <option value="2026">2026</option>
                <option value="2027">2027</option>
                <option value="2028">2028</option>
                <option value="2029">2029</option>
                <option value="2030">2030</option>
                <option value="2031">2031</option>
                <option value="2032">2032</option>
            </select>
            
            <select id="month-select">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
            </select>
       
            
            <select id="day-select">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
            </select>
            
            <select id="hour-select">
                    <option value="0">00</option>
                    <option value="1">01</option>
                    <option value="2">02</option>
                    <option value="3">03</option>
                    <option value="4">04</option>
                    <option value="5">05</option>
                    <option value="6">06</option>
                    <option value="7">07</option>
                    <option value="8">08</option>
                    <option value="9">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
            </select>
            
            <select id="minite-select">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                    <option value="32">32</option>
                    <option value="33">33</option>
                    <option value="34">34</option>
                    <option value="35">35</option>
                    <option value="36">36</option>
                    <option value="37">37</option>
                    <option value="38">38</option>
                    <option value="39">39</option>
                    <option value="40">40</option>
                    <option value="41">41</option>
                    <option value="42">42</option>
                    <option value="43">43</option>
                    <option value="44">44</option>
                    <option value="45">45</option>
                    <option value="46">46</option>
                    <option value="47">47</option>
                    <option value="48">48</option>
                    <option value="49">49</option>
                    <option value="50">50</option>
                    <option value="51">51</option>
                    <option value="52">52</option>
                    <option value="53">53</option>
                    <option value="54">54</option>
                    <option value="55">55</option>
                    <option value="56">56</option>
                    <option value="57">57</option>
                    <option value="58">58</option>
                    <option value="59">59</option>
            </select>
            
            <select id="second-select">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
                <option value="32">32</option>
                <option value="33">33</option>
                <option value="34">34</option>
                <option value="35">35</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                <option value="44">44</option>
                <option value="45">45</option>
                <option value="46">46</option>
                <option value="47">47</option>
                <option value="48">48</option>
                <option value="49">49</option>
                <option value="50">50</option>
                <option value="51">51</option>
                <option value="52">52</option>
                <option value="53">53</option>
                <option value="54">54</option>
                <option value="55">55</option>
                <option value="56">56</option>
                <option value="57">57</option>
                <option value="58">58</option>
                <option value="59">59</option>
            </select>
            
            <p id="result-wrapper">现在距离 2001年1月1日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>

            <!-- 使用上方的HTML结构（可以根据需要自行微调）为基础编写JavaScript代码
            当变更任何一个select选择时，更新 result-wrapper 的内容
            当所选时间早于现在时间时，文案为 现在距离 "所选时间" 已经过去 xxxx
            当所选时间晚于现在时间时，文案为 现在距离 "所选时间" 还有 xxxx
            注意当前时间经过所选时间时候的文案变化
            注意选择不同月份的时候，日期的可选范围不一样，比如1月可以选31天，11月只有30天，注意闰年
            同样，需要注意，通过优雅的函数封装，使得代码更加可读且可维护 -->

    <script>

    // 输出结果
    function outResult() {
       
        let yearSelect = document.getElementById('year-select').value
        let monthSelect = document.getElementById('month-select').value
        let daySelect = document.getElementById('day-select').value
        let hourSelect = document.getElementById('hour-select').value
        let miniteSelect = document.getElementById('minite-select').value
        let secondSelect = document.getElementById('second-select').value

         let resultWrapper = document.getElementById('result-wrapper')

            //获取当前时间
            let myDate = new Date

            let newYear = myDate.getFullYear
            let newMonth = myDate.getMonth
            let newDay = myDate.getDate
            //获得星期
            let newWeek = myDate.getDay
            let newHour = myDate.getHours
            let newMinute = myDate.getMinutes
            let newSecond = myDate.getSeconds

        //转换星期
        function shiftWeek(pweek) {
            let arr = ["日", "一", "二", "三", "四", "五", "六"]
            return arr[pweek]

        }

        // 前置零
        function zeroLeading(n) {
                if (n < 10) {
                    n = '0' + n
                }
                return n
            }

        // 更新所选日期
        function updateDate() {

            // 初始化选择的时间对象
            daySelect1 = zeroLeading(daySelect)
            hourSelect1 = zeroLeading(hourSelect)
            miniteSelect1 = zeroLeading(miniteSelect)
            secondSelect1 = zeroLeading(secondSelect)
            
            let selectData = new Date(yearSelect, monthSelect, daySelect)
            let selectWeek = shiftWeek(selectData.getDay())

          
             //计算相差时间:
              var date1= `${yearSelect},${monthSelect},${daySelect}` //开始时间  '2015/05/01 00:00:00'; 
                var date2 = new Date();    //结束时间  
                var date3 = Math.abs(date2.getTime() - new Date(date1).getTime());   //时间差的毫秒数        
            
                //------------------------------  
            
                //计算出相差天数  
                var days=Math.floor(date3/(24*3600*1000))  
            
                //计算出小时数  
            
                var leave1=date3%(24*3600*1000)    //计算天数后剩余的毫秒数  
                var hours=Math.floor(leave1/(3600*1000))  
                //计算相差分钟数  
                var leave2=leave1%(3600*1000)        //计算小时数后剩余的毫秒数  
                var minutes=Math.floor(leave2/(60*1000))  
                //计算相差秒数  
                var leave3=leave2%(60*1000)      //计算分钟数后剩余的毫秒数  
                var seconds=Math.round(leave3/1000)  
            
            var timeText
            if(date2.getTime() > new Date(date1).getTime()){
                timeText = '已经过去'
            }else{
                timeText = '还剩'
            }
            resultWrapper.innerHTML = `现在距离 ${yearSelect}年${monthSelect}月${daySelect1}日星期${selectWeek} ${hourSelect1}:${miniteSelect1}:${secondSelect1} ${timeText} ${days}天 ${hours} 小时 ${minutes} 分 ${seconds} 秒`

          
        }
        updateDate()
        
      setTimeout(outResult, 500)
     }
     outResult()    
    </script>
</body>
</html>